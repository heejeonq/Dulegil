<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="evt">
	<select id="getEvtDtl" resultType="hashmap" parameterType="hashmap">
		SELECT POST_NO, NM, TITLE, CONTENTS, HIT, TO_CHAR(E.REG_DT, 'YYYY.MM.DD') AS REG_DT
		FROM EVENT E INNER JOIN MEMBER M
		                     ON E.MEMBER_NO = M.MEMBER_NO
		WHERE E.DEL_DT IS NULL
		AND POST_NO = #{no}
	</select>
	
	<update id="evtHit" parameterType="hashmap">
		UPDATE EVENT SET HIT = HIT + 1
		WHERE POST_NO = #{no}
	</update>
	
	<select id="getEvtList"  parameterType="hashmap" resultType="hashmap">
		SELECT POST_NO, TITLE, TO_CHAR(EVENT_START_DT, 'YYYY-MM-DD') AS "START", TO_CHAR(EVENT_END_DT, 'YYYY-MM-DD') AS "END"
		FROM EVENT
		WHERE DEL_DT IS NULL
	</select> 
</mapper>